---
title: sharding-jdbc
date: 2021-03-12 15:43:39
tags:
---
垂直分表：将一个表按照字段分成多个表，每个表存储其中一部分字段。
它带来的提升：
1、为了避免IO争抢并减少锁表的几率，查看详情的用户与商品信息浏览互不影响。
2、充分发挥热门数据的操作效率，商品信息的操作的高效不会被商品描述的低效率所拖累。

为什么大字段的IO效率低？
由于数据量本身大，需要更长的读取时间；
跨页，页是数据库存储单位，很多查找及定位操作都是以页为单位的，单页内的数据行越多数据库整体性能越好，而大字段占用空间大，单页内存储行少，因此IO效率较低。
数据库以行为单位将数据加载到内存中，这样表中字段长度较短且访问频率较高，内存能加载更多的数据，命中率更高，减少了磁盘IO，从而提升了数据库性能。

一般来说，某业务实体中的各个数据项的访问频次是不一样的，部分字段可能是占用存储空间比较大的BLOB或TEXT。例如商品描述。所以，当表数据量很大时，可以将表按
字段切开，将热门字段、冷门字段分来放置在不同表中，这些表可以放在不同的存储设备上，避免IO争抢。垂直切分带来的性能提升主要集中在热门数据的操作效率上，而且
磁盘争用情况减少。

通常我们按以下原则进行垂直拆分：
1、把不常用的字段单独放在一张表；
2、把text、blob 等大字段拆分出来放置在附表中；
3、经常组合查询的列放在一张表中。

垂直分库
通过垂直分表性能得到了一定程度的提升，但是还没有达到要求，并且磁盘空间也快不够了，因为数据始终在一台服务器，垂直分表只解决了单一表数据量过大问题，但没有将表
分布到不同的服务器上，因此每个表还是竞争同一个物理机的CPU、内存、网络IO、磁盘。
根据业务可以拆分为用户库、商品库、订单库。并把这些库分散到不同服务器上。

垂直分库是指按照业务将表进行分类，分布到不同的数据库上，每个库可以放在不同的服务器上，它的核心理念是专库占用。
它带来的提升是：
1、解决业务层面的耦合，业务清晰；
2、


